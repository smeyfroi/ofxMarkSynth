{
  "version": "1.0",
  "description": "Smear example",
  
  "synth": {
    "agency": 1.0,
    "backgroundColor": "0.0, 0.0, 0.0, 1",
    "backgroundMultiplier": 0.1
  },

  "drawingLayers": {
    "foreground": {
      "size": [2400, 2400],
      "internalFormat": "GL_RGBA32F",
      "wrap": "GL_CLAMP_TO_EDGE",
      "clearOnUpdate": false,
      "blendMode": "OF_BLENDMODE_ALPHA",
      "useStencil": false,
      "numSamples": 0,
      "isDrawn": true
    }
  },

  "mods": {
    "Audio": {
      "type": "AudioDataSource",
      "config": {
        "MinPitch": "50",
        "MaxPitch": "800",
        "MinRms": "0",
        "MaxRms": "0.03"
      },
      "_comment": "Microphone capturing full ensemble"
    },

    "ColorPalette": {
      "type": "SomPalette",
      "_comment": "Learns colors from audio spectral features",
      "config": {
        "Iterations": "3000"
      }
    },

    "Smear": {
      "type": "Smear",
      "config": {
        "MixNew": "0.9",
        "AlphaMultiplier": "0.998",
        "Translation": "0, 0",
        "Field1Multiplier": "0.03",
        "Field1Bias": "0, 0",
        "Field2Multiplier": "0.005",
        "Field2Bias": "0, 0",
        "GridSize": "32, 32",
        "Strategy": "0",
        "JumpAmount2": "0.5",
        "BorderWidth7": "0.05",
        "GridLevels5": "1",
        "GhostBlend8": "0.5",
        "FoldPeriod9": "8, 8",
        "AgencyFactor": "1"
      },
      "layers": {
        "default": ["foreground"]
      }
    },

    "Random Radius": {
      "type": "RandomFloatSource",
      "config": {
        "CreatedPerUpdate": "0.1",
        "Min": "0.01",
        "Max": "0.1"
      }
    },
    "Random Point": {
      "type": "RandomVecSource",
      "config": {
        "CreatedPerUpdate": "2.0"
      }
    },
    "Random Color": {
      "type": "RandomHslColor",
      "config": {
        "CreatedPerUpdate": "0.5"
      }
    },
    "Circle": {
      "type": "SoftCircle",
      "config": {
        "ColourMultiplier": "1.0",
        "AlphaMultiplier": "1.0",
        "Softness": "0.0"
      },
      "layers": {
        "default": ["foreground"]
      }
    }
  },
  
  "connections": [
    "Audio.Spectral3dPoint -> ColorPalette.Sample",
    "ColorPalette.FieldTexture -> Smear.Field1Texture",

    "Random Radius.Float -> Circle.Radius",
    "Random Point.Vec2 -> Circle.Point",
    "Random Color.Vec4 -> Circle.Colour"
  ]
}
